(this.webpackJsonpui=this.webpackJsonpui||[]).push([[0],{108:function(e,a,t){"use strict";t.r(a);var n=t(0),r=t.n(n),i=t(9),l=t.n(i),o=t(16),s=t(17),c=t(20),m=t(19),u=t(50),d=t(11),p=t(167),g=t(164),h=t(147),f=t(161),E=t(150),v=t(148),y=t(163),b=t(36),w=t(4),S=t(144),O=r.a.createContext({token:null,_id:null,email:null,name:null,image:"profile.png",login:function(e,a,t,n,r){},updateImage:function(){},logout:function(){}}),x=t(166),T=t(154),P=t(152),j=t(153),I=t(151),C=function(e){Object(c.a)(t,e);var a=Object(m.a)(t);function t(e){var n;return Object(o.a)(this,t),(n=a.call(this,e)).state={isLogin:!0,dialogText:null,dialogTitle:null,email:null,userPassword:null,name:null,isSuccess:!1},n.signInHandler=function(e){e.preventDefault();var a=n.state.email,t=n.state.userPassword;if(0!==a.trim().length&&0!==t.trim().length){var r={query:"\n              query login($email: String!, $userPassword: String!) {\n                login(email: $email, userPassword: $userPassword){\n                  _id\n                  token\n                  tokenExpiry\n                  email\n                  name\n                  imageName\n                }\n              }\n            ",variables:{email:a,userPassword:t}};fetch("http://localhost:5000/graphql",{method:"POST",body:JSON.stringify(r),headers:{"Content-Type":"application/json"}}).then((function(e){if(200!==e.status&&201!==e.status)throw n.isSuccess=!1,n.isOpen=!0,new Error("Failed!");return e.json()})).then((function(e){var a=e.data.login;if(!a)throw n.state.dialogTitle="Failed",n.state.dialogText=e.errors[0].message,n.setState({isOpen:!0}),new Error(e.errors[0].message);n.context.login(a.email,a.token,a.name,a._id,a.tokenExpiry,a.imageName)})).catch((function(e){}))}},n}return Object(s.a)(t,[{key:"render",value:function(){var e=this,a=this.props.classes;return r.a.createElement(S.a,{component:"main",maxWidth:"xs"},r.a.createElement(y.a,{padding:"2rem",borderBottom:"3rem"},r.a.createElement(h.a,null),r.a.createElement("div",{className:a.paper},r.a.createElement(p.a,{className:a.avatar}),r.a.createElement(b.a,{component:"h1",variant:"h5"},"Sign in"),r.a.createElement("form",{className:a.form,onSubmit:this.signInHandler},r.a.createElement(v.a,{container:!0,spacing:2},r.a.createElement(v.a,{item:!0,xs:12},r.a.createElement(f.a,{variant:"outlined",required:!0,fullWidth:!0,id:"email",label:"Email Address",name:"email",autoComplete:"email",onChange:function(a){e.state.email=a.target.value}})),r.a.createElement(v.a,{item:!0,xs:12},r.a.createElement(f.a,{variant:"outlined",required:!0,fullWidth:!0,name:"password",label:"Password",type:"password",id:"password",onChange:function(a){e.state.userPassword=a.target.value}}))),r.a.createElement(g.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",className:a.submit},"Sign in"),r.a.createElement(v.a,{container:!0},r.a.createElement(v.a,{item:!0,xs:!0},r.a.createElement(E.a,{href:"/forgot_password",variant:"body2"},"Forgot password?")),r.a.createElement(v.a,{item:!0},r.a.createElement(E.a,{href:"sign_up",variant:"body2"},"Register")))))),r.a.createElement(x.a,{open:this.state.isOpen,onClose:function(){e.setState({isOpen:!1})},"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description"},r.a.createElement(I.a,{id:"alert-dialog-title"},this.state.dialogTitle),r.a.createElement(P.a,null,r.a.createElement(j.a,{id:"alert-dialog-description"},this.state.dialogText)),r.a.createElement(T.a,null,r.a.createElement(g.a,{onClick:function(){e.setState({isOpen:!1})},color:"primary",autoFocus:!0},"OK"))))}}]),t}(n.Component);C.contextType=O;var k=Object(w.a)((function(e){return{paper:{marginTop:e.spacing(8),display:"flex",flexDirection:"column",alignItems:"center"},avatar:{margin:e.spacing(1),backgroundColor:e.palette.secondary.main},form:{width:"100%",marginTop:e.spacing(3)},submit:{margin:e.spacing(3,0,2)}}}))(C),N=function(e){Object(c.a)(t,e);var a=Object(m.a)(t);function t(e){var n;return Object(o.a)(this,t),(n=a.call(this,e)).state={isLogin:!0,dialogText:null,dialogTitle:null,email:null,userPassword:null,name:null,isSuccess:!1},n.checkSuccess=!1,n.signUpHandler=function(e){e.preventDefault();var a=n.state.email,t=n.state.name,r=n.state.userPassword;if(0!==a.trim().length){var i={query:"\n              mutation signUp($name: String!, $email: String!, $userPassword: String!) {\n                signUp(userInput: {name: $name, email: $email, userPassword: $userPassword}) {\n                  name\n                  email\n                  userPassword\n                }\n              }\n            ",variables:{email:a,name:t,userPassword:r}};fetch("http://localhost:5000/graphql",{method:"POST",body:JSON.stringify(i),headers:{"Content-Type":"application/json"}}).then((function(e){if(200!==e.status&&201!==e.status)throw n.state.dialogText="You have already registered. ",n.state.dialogTitle="ERROR",n.setState({isOpen:!0}),new Error("Failed here!");n.state.dialogText="Welcome "+n.state.name+"!! Your registration is successful",n.state.dialogTitle="SUCCESS",n.setState({isOpen:!0}),n.checkSuccess=!0})).catch((function(e){}))}},n}return Object(s.a)(t,[{key:"render",value:function(){var e=this,a=this.props.classes;return r.a.createElement(S.a,{component:"main",maxWidth:"xs"},r.a.createElement(y.a,{padding:"2rem"},r.a.createElement(h.a,null),r.a.createElement("div",{className:a.paper},r.a.createElement(p.a,{className:a.avatar}),r.a.createElement(b.a,{component:"h1",variant:"h5"},"Sign Up"),r.a.createElement("form",{className:a.form,onSubmit:this.signUpHandler},r.a.createElement(v.a,{container:!0,spacing:2},r.a.createElement(v.a,{item:!0,xs:12},r.a.createElement(f.a,{name:"firstName",variant:"outlined",required:!0,fullWidth:!0,id:"firstName",label:"First Name",autoFocus:!0,onChange:function(a){e.state.name=a.target.value}})),r.a.createElement(v.a,{item:!0,xs:12},r.a.createElement(f.a,{variant:"outlined",required:!0,fullWidth:!0,id:"email",type:"email",label:"Email Address",name:"email",onChange:function(a){e.state.email=a.target.value}})),r.a.createElement(v.a,{item:!0,xs:12},r.a.createElement(f.a,{variant:"outlined",required:!0,fullWidth:!0,name:"password",label:"Password",type:"password",id:"password",onChange:function(a){e.state.userPassword=a.target.value}}))),r.a.createElement(g.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",className:a.submit},"Sign Up"),r.a.createElement(v.a,{container:!0,justify:"flex-end"},r.a.createElement(v.a,{item:!0},r.a.createElement(E.a,{href:"/",variant:"body2"},"Already have an account? Sign in")))))),r.a.createElement(x.a,{open:this.state.isOpen,onClose:function(){e.setState({isOpen:!1})},"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description"},r.a.createElement(I.a,{id:"alert-dialog-title"},this.state.dialogTitle),r.a.createElement(P.a,null,r.a.createElement(j.a,{id:"alert-dialog-description"},this.state.dialogText)),r.a.createElement(T.a,null,r.a.createElement(g.a,{onClick:function(){1==e.checkSuccess?e.props.history.push("/"):e.setState({isOpen:!1})},color:"primary",autoFocus:!0},"OK"))))}}]),t}(n.Component),q=Object(w.a)((function(e){return{paper:{marginTop:e.spacing(8),display:"flex",flexDirection:"column",alignItems:"center"},avatar:{margin:e.spacing(1),backgroundColor:e.palette.secondary.main},form:{width:"100%",marginTop:e.spacing(3)},submit:{margin:e.spacing(3,0,2)}}}))(N),W=function(e){Object(c.a)(t,e);var a=Object(m.a)(t);function t(e){var n;return Object(o.a)(this,t),(n=a.call(this,e)).state={isLogin:!0,email:n.props.match.params.id,newPassword:null,confirmPassword:null},n.resetPasswordHandler=function(e){e.preventDefault();var a=n.state.email,t=n.state.newPassword,r=n.state.confirmPassword;if(0!==t.trim().length&&0!==r.trim().length){if(t!=r)throw new Error("Passwords do not match");var i={query:"\n                mutation resetPassword($email: String!, $userPassword: String!) {\n                  resetPassword(email: $email, userPassword: $userPassword) {\n                    email\n                  }\n                }\n              ",variables:{email:a,userPassword:t}};fetch("http://localhost:5000/graphql",{method:"POST",body:JSON.stringify(i),headers:{"Content-Type":"application/json"}}).then((function(e){if(200!==e.status&&201!==e.status)throw new Error("Failed here!");n.props.history.push("/")})).catch((function(e){}))}},n}return Object(s.a)(t,[{key:"render",value:function(){var e=this,a=this.props.classes;return r.a.createElement(S.a,{component:"main",maxWidth:"xs"},r.a.createElement(h.a,null),r.a.createElement("div",{className:a.paper},r.a.createElement(p.a,{className:a.avatar}),r.a.createElement(b.a,{component:"h1",variant:"h5"},"Reset Password"),r.a.createElement("form",{className:a.form,onSubmit:this.resetPasswordHandler,noValidate:!0},r.a.createElement(v.a,{container:!0,spacing:2},r.a.createElement(v.a,{item:!0,xs:12},r.a.createElement(f.a,{variant:"outlined",required:!0,fullWidth:!0,label:"New Password",type:"password",id:"password",onChange:function(a){e.state.newPassword=a.target.value}})),r.a.createElement(v.a,{item:!0,xs:12},r.a.createElement(f.a,{variant:"outlined",required:!0,fullWidth:!0,label:"Confirm Password",type:"password",id:"password",onChange:function(a){e.state.confirmPassword=a.target.value}}))),r.a.createElement(g.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",className:a.submit},"CONFIRM"))))}}]),t}(n.Component);W.contextType=O;var $=Object(w.a)((function(e){return{paper:{marginTop:e.spacing(8),display:"flex",flexDirection:"column",alignItems:"center"},avatar:{margin:e.spacing(1),backgroundColor:e.palette.secondary.main},form:{width:"100%",marginTop:e.spacing(3)},submit:{margin:e.spacing(3,0,2)}}}))(W),F=t(155),D=t(156),_=t(84),A=t.n(_),R=t(68),H=t.n(R),U=t(85),B=t.n(U),J=t(160),L=t(159),K=t(157),M=t(158),Y=t(149),V=function(e){Object(c.a)(t,e);var a=Object(m.a)(t);function t(){var e;Object(o.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(e=a.call.apply(a,[this].concat(r))).state={showBrowse:!1,showEdit:!0,buttonText:"EDIT",file:null,display:localStorage.getItem("image")},e.updateImage=function(){var e={query:"\n                mutation updateImage($email: String!, $imageName: String!) {\n                  updateImage(email: $email, imageName: $imageName) {\n                    email\n                  }\n                }\n              ",variables:{email:localStorage.getItem("email"),imageName:localStorage.getItem("image")}};fetch("http://localhost:5000/graphql",{method:"POST",body:JSON.stringify(e),headers:{"Content-Type":"application/json"}}).then((function(e){window.location.reload(!1)})).catch((function(e){}))},e.uploadFile=function(a){a.preventDefault();var t=localStorage.getItem("email"),n=localStorage.getItem("_id"),r=e.state.file,i=new FormData;i.append("email",t),i.append("name_id",n),i.append("myfile",r),fetch("http://localhost:5000/uploadjavatpoint",{method:"POST",body:i}).then((function(e){return e.json()})).then((function(a){localStorage.setItem("image",a),e.setState({display:a}),e.setState({showBrowse:!1}),e.setState({showEdit:!0}),e.setState({buttonText:"EDIT"}),e.updateImage()})).catch((function(e){}))},e}return Object(s.a)(t,[{key:"render",value:function(){var e=this,a=this.props.classes;return r.a.createElement(r.a.Fragment,null,r.a.createElement(F.a,{position:"static"},r.a.createElement(D.a,null,r.a.createElement(b.a,{className:a.title}),r.a.createElement(g.a,{variant:"contained",color:"secondary",onClick:function(){e.context.logout()},startIcon:r.a.createElement(A.a,null)},"Logout"))),r.a.createElement(S.a,{component:"main",maxWidth:"xs"},r.a.createElement(y.a,{padding:"2rem",borderBottom:"3rem"},r.a.createElement(h.a,null),r.a.createElement("div",{className:a.paper},r.a.createElement(K.a,null,r.a.createElement(M.a,{title:this.context.name,subheader:this.context.email}),r.a.createElement(L.a,{className:a.media,image:"http://localhost:5000/"+localStorage.getItem("image")}),r.a.createElement(J.a,null,r.a.createElement(v.a,{container:!0,justify:"center"},r.a.createElement("form",{onSubmit:this.uploadFile},this.state.showBrowse&&r.a.createElement(r.a.Fragment,null,r.a.createElement(v.a,{container:!0,justify:"center"},r.a.createElement(Y.a,{variant:"contained",color:"secondary",hidden:"true",justify:"flex-end",type:"file",inputProps:{accept:"image/*"},onChange:function(a){e.setState({file:a.target.files[0]})},required:!0,startIcon:r.a.createElement(H.a,null)})),r.a.createElement(v.a,{container:!0,justify:"center"},r.a.createElement(g.a,{variant:"contained",color:"secondary",type:"submit",className:a.upload,startIcon:r.a.createElement(H.a,null)},"UPLOAD"))),this.state.showEdit&&r.a.createElement(v.a,{container:!0,justify:"center"},r.a.createElement(g.a,{variant:"contained",color:"secondary",className:a.upload,onClick:function(a){a.preventDefault(),e.setState({showBrowse:!0,showEdit:!1})},startIcon:r.a.createElement(B.a,null)},"EDIT"))))))))))}}]),t}(n.Component);V.contextType=O;var z=Object(w.a)((function(e){return{root:{maxWidth:245},media:{paddingTop:"100%",margin:"5%"},title:{flex:1},upload:{margin:"5%"}}}))(V),G=function(e){Object(c.a)(t,e);var a=Object(m.a)(t);function t(){var e;Object(o.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(e=a.call.apply(a,[this].concat(r))).state={isOpen:!1,email:"",dialogText:null,dialogTitle:null},e.sendEmailHandler=function(a){a.preventDefault();var t=e.state.email;if(0!==t.trim().length){var n={query:"\n              query forgotPassword($email: String!) {\n                forgotPassword(email: $email){\n                    email\n                }\n              }\n            ",variables:{email:t}};fetch("http://localhost:5000/graphql",{method:"POST",body:JSON.stringify(n),headers:{"Content-Type":"application/json"}}).then((function(a){if(200!==a.status&&201!==a.status)throw e.state.dialogText="There was some issue with the process. Please check if you have entered the right email address and try again",e.state.dialogTitle="ERROR",e.setState({isOpen:!0}),new Error("Failed here!");e.state.dialogText="We have sent a reset password email to "+e.state.email+". Please click on the reset password link",e.state.dialogTitle="SENT",e.setState({isOpen:!0}),localStorage.setItem("forgottenEmail",t)})).catch((function(e){}))}},e}return Object(s.a)(t,[{key:"render",value:function(){var e=this,a=this.props.classes;return r.a.createElement(S.a,{component:"main",maxWidth:"xs"},r.a.createElement(h.a,null),r.a.createElement("div",{className:a.paper},r.a.createElement(b.a,{component:"h5",variant:"h5"},"Forgot your password? Don't worry . Tell us the email address you registered with"),r.a.createElement("form",{className:a.form,onSubmit:this.sendEmailHandler},r.a.createElement(v.a,{container:!0,spacing:2},r.a.createElement(v.a,{item:!0,xs:12},r.a.createElement(f.a,{variant:"outlined",required:!0,fullWidth:!0,id:"email",label:"Email Address",name:"email",type:"email",autoComplete:"email",onChange:function(a){e.state.email=a.target.value}})),r.a.createElement(v.a,{container:!0,justify:"flex-end"},r.a.createElement(v.a,{item:!0},r.a.createElement(E.a,{href:"/login",variant:"body2"},"Login")))),r.a.createElement(g.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",className:a.submit},"SEND MAIL"))),r.a.createElement(x.a,{open:this.state.isOpen,onClose:function(){e.setState({isOpen:!1})},"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description"},r.a.createElement(I.a,{id:"alert-dialog-title"},this.state.dialogTitle),r.a.createElement(P.a,null,r.a.createElement(j.a,{id:"alert-dialog-description"},this.state.dialogText)),r.a.createElement(T.a,null,r.a.createElement(g.a,{onClick:function(){e.props.history.push("/")},color:"primary",autoFocus:!0},"OK"))))}}]),t}(n.Component),Q=Object(w.a)((function(e){return{paper:{marginTop:e.spacing(8),display:"flex",flexDirection:"column",alignItems:"center"},avatar:{margin:e.spacing(1),backgroundColor:e.palette.secondary.main},form:{width:"100%",marginTop:e.spacing(3)},submit:{margin:e.spacing(3,0,2)}}}))(G),X=function(e){Object(c.a)(t,e);var a=Object(m.a)(t);function t(){var e;Object(o.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(e=a.call.apply(a,[this].concat(r))).state={token:localStorage.getItem("token"),_id:null,email:null,name:localStorage.getItem("name"),image:localStorage.getItem("image")},e.forgottenEmail=localStorage.getItem("forgottenEmail"),e.login=function(a,t,n,r,i,l){l||(l="profile.png"),localStorage.setItem("token",t),localStorage.setItem("name",n),localStorage.setItem("email",a),localStorage.setItem("_id",r),localStorage.setItem("image",l),e.setState({email:a,token:t,name:n,_id:r,image:l})},e.updateImage=function(e){localStorage.setItem("image",e)},e.logout=function(){e.setState({email:null,name:null,token:null,_id:null,image:null}),localStorage.removeItem("token"),localStorage.removeItem("forgottenEmail"),localStorage.removeItem("_id")},e}return Object(s.a)(t,[{key:"render",value:function(){return r.a.createElement(O.Provider,{value:{_id:this.state._id,token:this.state.token,email:this.state.email,name:this.state.name,image:this.state.image,login:this.login,logout:this.logout}},r.a.createElement(u.a,null,r.a.createElement(d.d,null,r.a.createElement(d.a,{from:"/",to:"/login",exact:!0}),!this.state.token&&r.a.createElement(d.a,{from:"/profile",to:"/login",exact:!0}),this.state.token&&r.a.createElement(d.a,{from:"/login",to:"/profile",exact:!0}),r.a.createElement(d.b,{path:"/login",component:k}),r.a.createElement(d.b,{path:"/sign_up",component:q}),r.a.createElement(d.b,{path:"/reset_password/:id",component:$}),r.a.createElement(d.b,{path:"/profile",component:z}),r.a.createElement(d.b,{path:"/forgot_password",component:Q}))))}}]),t}(n.Component);l.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(X,null)),document.getElementById("root"))},97:function(e,a,t){e.exports=t(108)}},[[97,1,2]]]);
//# sourceMappingURL=main.77b08799.chunk.js.map